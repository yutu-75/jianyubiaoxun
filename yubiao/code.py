import requests,re,base64
from hyper.contrib import HTTP20Adapter
from chaojiying import main
from .images_code import img_main


url = 'https://www.jianyu360.com/jylab/supsearch/index.html'

# 登录后的cookie
cookie = "selectNum=1; SESSIONID=3d9fbf3571714f944a61b829e9acb413752e7635; SESSIONID=3d9fbf3571714f944a61b829e9acb413752e7635; UM_distinctid=17854bcb602e2-029a508fcb35f2-5771031-1fa400-17854bcb6037bb; selectNum=1; Hm_lvt_72331746d85dcac3dac65202d103e5d9=1616329348,1616330361; CNZZDATA1261815924=389284313-1616326663-https%253A%252F%252Fwww.jianyu360.com%252F%7C1616332067; Hm_lpvt_72331746d85dcac3dac65202d103e5d9=1616335785; userid_secure=vn7KawnpJJhtW1sgWmzWt2fzg7efapE9vnv+w/TzSLyQopzVCqQqpna6qBMnLbUpT0hS/WxweWzMcZfzOiWX9B0SkLxzk6md+/oQ/qyZZYXaGEmzpx594EdnDip/NkggO+B6g87b3iBjCQgUho1uhaEWsvPqyJ6LOL5SdAOHu3ht1OSo1MBAJAB379FPMMVxuZlCsBJ3qxcU8h00+2e9aOHwRu6yHlSziZRH/4Ut+KuuWUyL1MeMRuwCUaykwHAIXaW73aTqCXtjLggisXGqr+wvtZv4PjLJMohAXj1w+YZItZ6l0SNy1/VPv3nGXxzy+52qRQAXd0dcvKrzTTyquioqKjIwMjEtMDMtMjEgMDA6MDA6MDA="

headers = {
# ":authority": "www.jianyu360.com",
# ":method": "GET",
# ":path": "/jylab/supsearch/index.html",
# ":scheme": "https",
"accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",

"accept-encoding": "gzip, deflate, br",
"accept-language": "zh-CN,zh;q=0.9,en;q=0.8,ar;q=0.7",
"cache-control": "max-age=0",
"cookie": cookie,
"sec-ch-ua": '"Google Chrome";v="89", "Chromium";v="89", ";Not A Brand";v="99"',
"sec-ch-ua-mobile": '?0',
"sec-fetch-dest": "document",
"sec-fetch-mode": "navigate",
"sec-fetch-site": "none",
"sec-fetch-user": "?1",
"upgrade-insecure-requests": '1',
'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36',
    # 'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36',
}
def img(base64_str,code_name):
    with open('qwq.txt','w',encoding='utf-8') as f:
        f.write('www')
    with open('./yubiao/img/code.png', 'wb') as f:
        """
        base64_str: 加密后的图片字符串
        code_name: 需要识别的文字
        """
        # 图片base64+加字符更改解密
        imgdata = base64.b64decode(base64_str[0].replace('&#43;', '+'))
        f.write(imgdata)        # 保存原始解密后的图片
        img_main(code_name)     # 调用普通合成处理

url_current = "https://www.jianyu360.com/jylab/supsearch/index.html"            # 当前遇到的验证码的url
def code_testing():
    while True:
        page_text = requests.post(url=url,headers=headers).text
        # print(page_text)
        if type(page_text) == dict:
            if 'count' in list(page_text):
                print('通过！')
                return 'no'
# "{'count': 0, 'interceptWord': '', 'keywords': '政府网站', 'limitFlag': False, 'list': [{'_id': 'ABCY2FaYykvOy06EmRoc2UgPicoFSBjXHR1KFgjKC8daGpzfjNUChw%3D', 'area': '广东', 'areaadd': 'GD', 'bidamount': 24860000, 'buyerclass': '政府办', 'city': '深圳市', 'detail': '', 'href': 'ABCYwFFfT0%2FIyA7ElV6dWIsDDMoIyNjV1J2Kx40Kk00Dw0Hdw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607414471, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '深圳市政府网站集约化平台建设项目中标公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYykvFj87NGRoc2UgPicoFSBjXHR1KFgjIDone3lwAAVUCaw%3D', 'area': '福建', 'areaadd': 'FJ', 'budget': 1600000, 'buyerclass': '政府办', 'city': '莆田市', 'detail': '', 'href': 'ABCY3ZrfT0FIyk4AmN2c1wkDzAoCSBjR2hzKCgWKgMkDw0HPQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607401249, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '福建莆田市信息中心莆田市政府网站群安全防护及保障服务项目', 'toptype': '招标'}, {'_id': 'ABCY2FaYykeLyg7M2hoc2UgPicoFSBjXHR1KFgkODonY31wAAFUCaE%3D', 'area': '广东', 'areaadd': 'GD', 'bidamount': 400000, 'buyerclass': '工信', 'city': '广州市', 'detail': '', 'href': 'ABCYwFFcD0vIyw7JGdyc1wOMDIoDSBgV2BxKSgwKgMCDw0G9A%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607397732, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '广州市番禺区政府网站信息服务及网站前端更新项目(采购项目编号：ZY140C2110F42111)竞争性磋商成交结果公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYykeIyg4Al5oc2UgPicoFSBjXHR1KFgnICEnZ3xwGDtUCX4%3D', 'area': '浙江', 'areaadd': 'ZJ', 'budget': 6, 'buyerclass': '住建', 'city': '嘉兴市', 'detail': '', 'href': 'ABCY2ZFdDI%2FMyk4Ell0cHIODzM4ARFjV3R0KzggKgMkDw0HdA%3D%3D', 'indadd': 'JZGC', 'industry': '建筑工程', 'publishtime': 1607393535, 's_subscopeclass': '建筑工程_工程施工,信息技术_软件开发,行政办公_生活用品,行政办公_通用办公设备', 'stypeadd': 'HT', 'subtype': '合同', 'title': '关于政府网站改造项目的在线询价合同公告[嘉兴市住房公积金管理服务中心]', 'toptype': '其它'}, {'_id': 'ABCY2FaYykeIyw7Enhoc2UgPicoFSBjXHR1KFgnID0eYFZzdCtUCeQ%3D', 'area': '河北', 'areaadd': 'HB', 'bidamount': 596000, 'buyerclass': '政府办', 'city': '保定市', 'detail': '', 'href': 'ABCY2ZddT0FMyA4NHd1c1w4CjAoHSFmcXx2KA4kKg4kDw0Hyg%3D%3D', 'indadd': '', 'publishtime': 1607393400, 'stypeadd': 'CJ', 'subtype': '成交', 'title': '保定市人民政府办公室（机关）全市政府网站普查项目公开招标中标公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYykeIy06Al5oc2UgPicoFSBjXHR1KFgnIDpFc35wDjtUCcA%3D', 'area': '陕西', 'areaadd': 'SXC', 'city': '渭南市', 'detail': '', 'href': 'ABCYGYAcz0vGSo4NFl5cFw4MDBfASZgcVJ2KDggKgM0Dw0Hpg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607393185, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发,信息技术_其他', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '华阴政府网站维护技术服务采购的结果', 'toptype': '结果'}, {'_id': 'ABCY2FaYykeBSY4ElZjc08ODyRfHRZ3cVJ0P1gjKy9FUXxwGFpUCZU%3D', 'area': '江西', 'areaadd': 'JX', 'budget': 300000, 'buyerclass': '政府办', 'city': '南昌市', 'detail': '', 'href': 'ABCY1wAcTJYBSw7AlVzcwcwCjACDRFgYUJ9KDgsKkE0Dw0Guw%3D%3D', 'indadd': '', 'publishtime': 1607358540, 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '江西誉驰招标咨询有限公司关于南昌市湾里管理局政府网站集约化建设采购项目竞争性磋商采购公告', 'toptype': '招标'}, {'_id': 'ABCY1wIdjI%2FNyYsJHBjc08ODyRfHRZ3cVJ0PCgzLz0efGdzZQ1UCa4%3D', 'area': '上海', 'areaadd': 'SH', 'city': '上海市', 'detail': '', 'href': 'ABCYAFFfT1YOyY4NGd6dXI8CzACFSdjR3hwKB4CKk0SDw0HgQ%3D%3D', 'indadd': '', 'publishtime': 1607354101, 'stypeadd': 'ZB', 'subtype': '招标', 'title': '2021年青浦区政府网站整体技术服务项目招标公告', 'toptype': '招标'}, {'_id': 'ABCY1wIdjI%2FNyYsM2Rjc08ODyRfHRZ3cVJ0PCgzLz0edGlzYB1UCbY%3D', 'area': '上海', 'areaadd': 'SH', 'city': '上海市', 'detail': '', 'href': 'ABCYAFFcjIvOy84JGt2cAcwDTMCHSRmcXx0KDgsKkk0Dw0HYA%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607354083, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '2021年青浦区政府网站应用服务外包项目招标公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYylYAj0sNFZoc2UgPicoFSBjXHR1KFgnJi8Nf35zcQlUCgg%3D', 'area': '广西', 'areaadd': 'GX', 'bidamount': 1168000, 'budget': 1207600, 'buyerclass': '发改', 'city': '北海市', 'detail': '', 'href': 'ABCYHYEdjxYUCY7NFF6c1wSMzAoCSBjV3h1KygoKkkkDw0H%2Fg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607339494, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '云之龙招标集团有限公司北海市政府网站IPv6改造项目YLBHC20204021-S成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYylYNDkvAnhoc2UgPicoFSBjXHR1KFgnKC4NZ31zcV5UCmY%3D', 'area': '湖北', 'areaadd': 'HBC', 'bidamount': 229000, 'buyerclass': '政府办', 'city': '武汉市', 'detail': '', 'href': 'ABCY1xJdT0vNyA7NFF1cGI4CzNfIyZgR0J9Kzg0Kks0Dw0IJw%3D%3D', 'indadd': '', 'publishtime': 1607338955, 'stypeadd': 'HT', 'subtype': '合同', 'title': '湖北省人民政府办公厅湖北省政务管理办公室2020年湖北省政府网站监测服务项目合同公告', 'toptype': '其它'}, {'_id': 'ABCY2FaYykOIyAsRHhoc2UgPicoFSBjXHR1KFg4Nj0wZ2BzcjNUCjs%3D', 'area': '福建', 'areaadd': 'FJ', 'bidamount': 660060, 'buyerclass': '政府办', 'city': '龙岩市', 'detail': '', 'href': 'ABCYHZdfzJYLys7AmdxcFw4DzMoHSRgR1J2KA4gKgASDw0Hdw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607327280, 's_subscopeclass': '信息技术_软件开发,信息技术_系统集成及安全', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '龙岩市大数据中心2020年度龙岩市政府网站和政务新媒体第三方监测和预考评服务类采购项目结果公告(包1)', 'toptype': '结果'}, {'_id': 'ABCY2FaYykOJy07Enxoc2UgPicoFSBjXHR1KFg7IDoddFJwHB1UCZQ%3D', 'area': '四川', 'areaadd': 'SC', 'budget': 283000, 'buyerclass': '电信行业', 'city': '成都市', 'detail': '', 'href': 'ABCZnZrcDIFJyY7En9yc2IsCDBfIydgcXxxKB4CKgM0Dw0H3g%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607324685, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发,信息技术_其他', 'stypeadd': 'XJ', 'subtype': '询价', 'title': '中国电信四川公司2021年四川省级政府网站异云数据同步技术服务采购项目比选公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYykOODg4M3hoc2UgPicoFSBjXHR1KFg7Iy9FY2BzcitUCk4%3D', 'area': '山东', 'areaadd': 'SD', 'bidamount': 660000, 'buyerclass': '政府办', 'city': '济南市', 'detail': '', 'href': 'ABCYwFJfj0%2FJyo7Emt2c2I8DDMoSCdgR2h9KTgkKkoCDw0HsA%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607322155, 's_subscopeclass': '信息技术_软件开发,信息技术_系统集成及安全', 'stypeadd': 'HT', 'subtype': '合同', 'title': '山东省大数据局山东省政府网站统一技术平台主题资源库运行服务合同公开', 'toptype': '其它'}, {'_id': 'ABCY2FaYykOJykvEnxoc2UgPicoFSBjXHR1KFg7IC4wVmdze1JUChk%3D', 'area': '上海', 'areaadd': 'SH', 'budget': 687500, 'buyerclass': '政务中心', 'city': '上海市', 'detail': '', 'href': 'ABCY3ZVfT0%2FBSM4AmtycHJbPjNfCSJjYXh1KA4gKgASDw0H%2FQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607320560, 's_subscopeclass': '信息技术_软件开发,信息技术_其他', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '上海市青浦区行政服务中心2021年青浦区政府网站整体技术服务项目公开招标公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYykOOyM4NHxoc2UgPicoFSBjXHR1KFg7Iy4eeGdzfytUCkI%3D', 'area': '北京', 'areaadd': 'BJ', 'bidamount': 3918300, 'budget': 3918300, 'buyerclass': '其它', 'city': '北京市', 'detail': '', 'href': 'ABCY2ZFcz0vIyM4NFF4cHJbMTI4DSJgR15yKygCKksCDw0Hzg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607319653, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '北京市海淀区融媒体中心海淀区政府网站群改造项目成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYykOOyM6Alpoc2UgPicoFSBjXHR1KFg7Iy4eXmdzfglUCbM%3D', 'area': '上海', 'areaadd': 'SH', 'budget': 942000, 'buyerclass': '政务中心', 'city': '上海市', 'detail': '', 'href': 'ABCYGZdcT1YGS04EmN5c2JbCDA4HS1gcWR%2BKSg0Kk0CDw0ITA%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607318460, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '上海市青浦区行政服务中心2021年青浦区政府网站应用服务外包项目公开招标公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYy5YNyo7RHxoc2UgPicoFSBjXHR1KFgFJiEgWmhzZQ1UChQ%3D', 'area': '福建', 'areaadd': 'FJ', 'budget': 300000, 'buyerclass': '政府办', 'city': '福州市', 'detail': '', 'href': 'ABCYFxJfTwFIy07NFl0dXIoDTBfARFjYXhyKw4WKkokDw0HvQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607073289, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '福州市仓山区人民政府网站运维及增值服务项目竞争性谈判公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYy4vOyY7GWRoc2UgPicoFSBjXHR1KFgCNiEgf3lzfQlUCf8%3D', 'area': '甘肃', 'areaadd': 'GS', 'bidamount': 276000, 'budget': 280000, 'buyerclass': '政务中心', 'city': '天水市', 'detail': '', 'href': 'ABCYwFrdTwFOyA7AmN5c3IsCDIoSCRgR3BxKCgwKgMSDw0HOw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607072723, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '天水市秦州区政务服务管理局秦州区政府网站集约化建设项目成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYzweLDg6EmRoc2UgPicoFSBjXHR1KFgFKCFFdGhzfl5UCks%3D', 'area': '辽宁', 'areaadd': 'LN', 'bidamount': 16800, 'buyerclass': '政府办', 'city': '沈阳市', 'detail': '', 'href': 'ABCY1wEcj1YMyo4AmN2dWI8PjBfDSBgYXB%2FKB5RKko0Dw0IUg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607072356, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '政府网站集约化建设网站群安全防护项目', 'toptype': '结果'}, {'_id': 'ABCY2FaYy5YNyovM2Boc2UgPicoFSBjXHR1KFgFJiE3dFVzYz9UCik%3D', 'area': '天津', 'areaadd': 'TJ', 'budget': 44400, 'buyerclass': '公安', 'city': '天津市', 'detail': '', 'href': 'ABCZmZrfzIFKyk7JFFzcAc4CDBfESFmYXR%2FKDgkKks0Dw0H3w%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607071799, 's_subscopeclass': '信息技术_系统集成及安全,信息技术_其他', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '2020年天津市级重要信息系统和政府网站安全监测（等级测评）项目监理服务竞争性谈判公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzweIyo7EmRoc2UgPicoFSBjXHR1KFgwPC4efGpzf1pUCmE%3D', 'area': '陕西', 'areaadd': 'SXC', 'budget': 350000, 'buyerclass': '政府办', 'city': '西安市', 'detail': '', 'href': 'ABCYwEEcTIFUCo6All1cAc8CjACASdgYVJ1Kw4sKk0kDw0GTw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607065440, 's_subscopeclass': '信息技术_软件开发,信息技术_运维服务', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '阎良区政府网站集约化服务项目竞争性磋商公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzweMDg4RHhoc2UgPicoFSBjXHR1KFgzIz0eZGpzfl5UCqM%3D', 'area': '山西', 'areaadd': 'SX', 'bidamount': 198500, 'buyerclass': '政府办', 'city': '晋中市', 'detail': '', 'href': 'ABCYHZVfT0FOyo7An9zdWIoMzACSCdjR150KDggKgMkDw0Hug%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607050023, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '晋中市委市政府信息化中心市政府网站日常普查监测服务成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYykFGSovAmhjc08ODyRfHRZ3cVJ0P1gnKT03aFFzfwlUCZQ%3D', 'area': '河南', 'areaadd': 'HNC', 'city': '南阳市', 'detail': '', 'href': 'ABCZmYIcj0vKys7And1dWIwCzI4ASNgcWh2KA4kKk0CDw0Hbw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607049997, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '镇平县政府网站集约化建设项目竞争性磋商公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzwOIywsRHhoc2UgPicoFSBjXHR1KFgzKy8Nf31zeglUCiw%3D', 'area': '江西', 'areaadd': 'JX', 'buyerclass': '工信', 'city': '赣州市', 'detail': '', 'href': 'ABCY2ZZdD1YMy04ElF0c2I4MDMCDS1jV0J%2FKSgsKkk0Dw0IAQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1607001511, 's_subscopeclass': '信息技术_系统集成及安全', 'stypeadd': 'BG', 'subtype': '变更', 'title': '[赣州市本级]智埔国际工程咨询有限公司关于江西省赣州市大数据发展管理局赣州市政府网站集约化平台项目（项目编号：ZPGJ2020-GZ-G002）的电子化公开招标的更正公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYy44BSo7JFpjc08ODyRfHRZ3cVJ0P1g4PCEgdFRzdDtUCf8%3D', 'area': '安徽', 'areaadd': 'AH', 'bidamount': 470000, 'buyerclass': '政府办', 'city': '铜陵市', 'detail': '', 'href': 'ABCY3Zrfz0vBSY4JFF2cFwsCDI4TCdjV3x1KzgoKg8SDw0H9w%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606992415, 's_subscopeclass': '信息技术_软件开发,信息技术_系统集成及安全', 'stypeadd': 'HT', 'subtype': '合同', 'title': '铜陵市大数据中心全市政府网站IPv6改造升级项目', 'toptype': '其它'}, {'_id': 'ABCY2FaYzwOMyk7M3hoc2UgPicoFSBjXHR1KB4WOC8ef3xzcw1UCfo%3D', 'area': '安徽', 'areaadd': 'AH', 'bidamount': 629000, 'buyerclass': '政府办', 'city': '安庆市', 'detail': '', 'href': 'ABCY1xZdDwFJy04JHNxc2IwDTMCFS1jV1JzKyhRKg8kDw0Hhg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606984261, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '安庆市政府网站集约化平台防护升级项目中标结果公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYzwFFjwsJF5oc2UgPicoFSBjXHR1KB4WOCEgeFRzewlUCXg%3D', 'area': '河南', 'areaadd': 'HNC', 'budget': 570000, 'buyerclass': '信息技术', 'city': '南阳市', 'detail': '', 'href': 'ABCY1xBczwFKyA4JFV3cwcoDzIoDSBjR3B2KSg0Kkk0Dw0HNw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606983103, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '镇平县政府网站集约化建设项目竞争性磋商公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYjI%2FNDgvGXhjc08ODyRfHRZ3cVJ0Pw4wNjpFcGpzfh1UCjE%3D', 'area': '广东', 'areaadd': 'GD', 'budget': 334800, 'buyerclass': '政府办', 'city': '河源市', 'detail': '', 'href': 'ABCYGZVdD0vKyA7Ent5cwcsDTACAS1gV3R%2BKzgsKkkSDw0Hcw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606975172, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '河源市人民政府办公室2021年河源市政府网站和政务新媒体检查监测及考评服务项目竞争性磋商公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzwFOyMvRHxoc2UgPicoFSBjXHR1KB4ZKzogWXtzehlUCes%3D', 'area': '四川', 'areaadd': 'SC', 'budget': 188700, 'buyerclass': '电信行业', 'city': '成都市', 'detail': '', 'href': 'ABCZnYIcj1YUCw4JHN0cHI8CDBfDSdmYWB2KSggKkkCDw0IMg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606956093, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'XJ', 'subtype': '询价', 'title': '中国电信四川公司2021年四川省人民政府网站移动化及SSL证书服务采购项比选公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzwFNyovNF5oc2UgPicoFSBjXHR1KB5RPTodd3xzdlpUCmM%3D', 'area': '江西', 'areaadd': 'JX', 'budget': 5731000, 'buyerclass': '工信', 'city': '赣州市', 'detail': '', 'href': 'ABCYAFVcD1YJy86Ell4c3IsMzIoESJmcWRxKCgsKksCDw0Hug%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606944706, 's_subscopeclass': '信息技术_系统集成及安全', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '智埔国际工程咨询有限公司关于江西省赣州市大数据发展管理局赣州市政府网站集约化平台项目的电子化公开招标公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0%2FKy07GXhjc08ODyRfHRZ3cVJ0Px5RPD0ddGhzcwlUCio%3D', 'area': '江苏', 'areaadd': 'JS', 'budget': 300000, 'buyerclass': '政务中心', 'city': '南通市', 'detail': '', 'href': 'ABCY3ZdcT0%2FGS04JFF0cAcOMzMCQCJgV2B%2BKygwKkg0Dw0Hsw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606907449, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'DY', 'subtype': '单一', 'title': '崇川区人民政府网站和崇川区政务协同办公系统（二期）整合调整项目单一来源公示', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0oLys7JFZoc2UgPicoFSBjXHR1KB4oPy9FWlNzcz9UCgY%3D', 'area': '天津', 'areaadd': 'TJ', 'bidamount': 993000, 'budget': 993400, 'buyerclass': '党委办', 'city': '天津市', 'detail': '', 'href': 'ABCY1xFcDI%2FUCg4NH94c3IkMDBfARFgR1J%2BKB40Kk8kDw0IRA%3D%3D', 'indadd': 'JZGC', 'industry': '建筑工程', 'publishtime': 1606872263, 's_subscopeclass': '建筑工程_工程施工,信息技术_软件开发,信息技术_系统集成及安全', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '中国共产党天津市滨海新区委员会网络安全和信息化委员会办公室机关滨海新区政府网站集约化平台开发建设项目(项目编号:HGGP-2020-BH-0091)中标公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0vND8vRGBjc08ODyRfHRZ3cVJ0Px4oPy8Nf31zcl5UCmw%3D', 'area': '广西', 'areaadd': 'GX', 'bidamount': 327000, 'buyerclass': '科技', 'city': '百色市', 'detail': '', 'href': 'ABCZmYEfj0%2FKy04NGNxcwcsMzAoFSNgV3RyKzgWKgACDw0HKQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606815014, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '全市政府网站建设运维采购成交结果公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0vUCk4JGhoc2UgPicoFSBjXHR1KB4oOD0wdFVzci9UCjg%3D', 'area': '吉林', 'areaadd': 'JL', 'budget': 17100000, 'buyerclass': '其它', 'city': '长春市', 'detail': '', 'href': 'ABCYFxZcj0FOyA4NFF5c1wkMDA4IyJjV3R%2BKB44Kkg0Dw0IFg%3D%3D', 'indadd': 'JZGC', 'industry': '建筑工程', 'publishtime': 1606814774, 's_subscopeclass': '建筑工程_工程施工,信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '吉林省政府网站管理办公室吉林省政府网站集约化建设项目（二期）', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0eIyw6AnBjc08ODyRfHRZ3cVJ0Px4oOSEwcGhzdStUCcs%3D', 'area': '吉林', 'areaadd': 'JL', 'budget': 17100000, 'buyerclass': '其它', 'city': '长春市', 'detail': '', 'href': 'ABCZmZJfTIFGSA6EmtydXI8DzMCASNgV3ByKB4oKzs0Dw0Hcw%3D%3D', 'indadd': 'JZGC', 'industry': '建筑工程', 'publishtime': 1606804870, 's_subscopeclass': '建筑工程_工程施工,信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '[公开招标]吉林省政府网站管理办公室吉林省政府网站集约化建设项目（二期）', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0eAjksAlpoc2UgPicoFSBjXHR1KB4sOT0gdFVzdT9UCbU%3D', 'area': '云南', 'areaadd': 'YN', 'bidamount': 851000, 'budget': 860000, 'buyerclass': '政府办', 'city': '玉溪市', 'detail': '', 'href': 'ABCYwFrdjxYLyw6ElFxcGI4CDBfESBjYXB9Kw44Kg0kDw0HrQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606793815, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '玉溪市人民政府网站群政务新媒体备案发布系统建设项目成交结果公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0eAjgsAnxoc2UgPicoFSBjXHR1KB4sOS8edGhzcS9UCcU%3D', 'area': '安徽', 'areaadd': 'AH', 'bidamount': 719, 'buyerclass': '政府办', 'detail': '', 'href': 'ABCYGYEfjI%2FLyM7JFl3cHIsMDMCQCRjR15wKygCKk0CDw0Hcw%3D%3D', 'indadd': 'XZBG', 'industry': '行政办公', 'publishtime': 1606791137, 's_subscopeclass': '行政办公_生活用品,行政办公_通用办公设备', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '【安徽省直】安徽省人民政府网站于2020年12月01日成交一笔交易', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0eMDk4RHhoc2UgPicoFSBjXHR1KB4vID03dFNzdStUCjo%3D', 'area': '山西', 'areaadd': 'SX', 'bidamount': 320000, 'buyerclass': '政府办', 'city': '晋中市', 'detail': '', 'href': 'ABCZnZJcz0FJyg4JHt1c2I4DzACDRFgV3B9Kw4wKkskDw0How%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606788210, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '晋中市委市政府信息化中心全市政府网站集约化平台IPV6改造项目成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0OLyksAlZjc08ODyRfHRZ3cVJ0Px4rKS8dd31zdTNUCa4%3D', 'area': '内蒙古', 'areaadd': 'NMG', 'bidamount': 5297000, 'buyerclass': '政务中心', 'city': '赤峰市', 'detail': '', 'href': 'ABCY1xFcz0vLys4NHN0cwckCjAoTCBgR2RxKSggKg4CDw0HPw%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606742632, 's_subscopeclass': '信息技术_软件开发,信息技术_系统集成及安全', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '赤峰市政务服务局赤峰市政府网站集约化平台建设中标（成交）公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0OOD87M2Bjc08ODyRfHRZ3cVJ0Px4sPSEeWmdzcwlUCcA%3D', 'area': '安徽', 'areaadd': 'AH', 'bidamount': 590000, 'buyerclass': '政府办', 'city': '马鞍山市', 'detail': '', 'href': 'ABCYAEEcjwFOyw7NFVydXIsDTAoSCdjR0JyKyg0KkkSDw0HIg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606732871, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'HT', 'subtype': '合同', 'title': '马鞍山全市政府网站统一信息资源库建设及创新应用项目（第二次）合同公告（第1次）', 'toptype': '其它'}, {'_id': 'ABCY2FaYz0OOD07RGRoc2UgPicoFSBjXHR1KB4vKSEgXmlzfSNUCfs%3D', 'area': '广西', 'areaadd': 'GX', 'buyerclass': '发改', 'city': '北海市', 'detail': '', 'href': 'ABCYHYIcD0%2FOy87JH96cHIsMTMoIyRgcXhwKTgWKgM0Dw0IGg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606732326, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'BG', 'subtype': '变更', 'title': '云之龙招标集团有限公司关于北海市政府网站IPv6改造项目(YLBHC20204021-S)更正公告(一)', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0OMyosJFpoc2UgPicoFSBjXHR1KB4gNj03d35wAA1UCXM%3D', 'area': '安徽', 'areaadd': 'AH', 'bidamount': 135200, 'budget': 136000, 'buyerclass': '政府办', 'city': '黄山市', 'detail': '', 'href': 'ABCYFxBdDxYBS84Ell5c3IoMzAoIxZjcXh2Kw40KgwCDw0HqQ%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606721945, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'CJ', 'subtype': '成交', 'title': '黄山市政府网站与政务新媒体检查指标服务采购项目成交公告', 'toptype': '结果'}, {'_id': 'ABCY2FaYz0FLys7NGhoc2UgPicoFSBjXHR1KB4jLDodZFVzczNUCdA%3D', 'area': '广东', 'areaadd': 'GD', 'budget': 2320000, 'buyerclass': '工信', 'city': '深圳市', 'detail': '', 'href': 'ABCY3ZZcDwFBSk4JFVxcHIwCjNfCS1gR2B%2FKx5RKkgSDw0H1w%3D%3D', 'indadd': '', 'publishtime': 1606705251, 'stypeadd': 'ZB', 'subtype': '招标', 'title': '2021年龙华区政府网站运营服务项目公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYz0FJD07JHBoc2UgPicoFSBjXHR1KB4jLy5FY3xzdAFUCeM%3D', 'area': '辽宁', 'areaadd': 'LN', 'budget': 51300, 'buyerclass': '政府办', 'city': '沈阳市', 'detail': '', 'href': 'ABCY2ZZfz0%2FOyk6AnNxc3ISDTI4ASNgYXRzKygCKkgCDw0HwA%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606700896, 's_subscopeclass': '信息技术_软件开发', 'stypeadd': 'ZB', 'subtype': '招标', 'title': '政府网站集约化建设网站群安全防护项目', 'toptype': '招标'}, {'_id': 'ABCY2FaYzI%2FKD87JGBoc2UgPicoFSBjXHR1KB4jKSEecGlzfi9UCgA%3D', 'area': '山东', 'areaadd': 'SD', 'budget': 1450000, 'buyerclass': '工信', 'city': '青岛市', 'detail': '', 'href': 'ABCY3YAdTIvBSk4Ant3cHI8DzM4FSZmcWhwKw40KkgkDw0Hqg%3D%3D', 'indadd': 'XXJS', 'industry': '信息技术', 'publishtime': 1606646313, 's_subscopeclass': '信息技术_运维服务,信息技术_软件开发', 'stypeadd': 'JT', 'subtype': '竞谈', 'title': '青岛市黄岛区工业和信息化局-青岛西海岸新区政府网站改版服务采购项目-竞争性磋商公告', 'toptype': '招标'}, {'_id': 'ABCY2FaYzI%2FIy0sJHxjc08ODyRfHRZ3cVJ0Px4jLSEnd35zcV5UCjQ%3D', 'area': '山东', 'areaadd': 'SD', 'city': '青岛市', 'detail': '', 'href': 'ABCY1xrcj0vLy84NGtxcwcsMDACTC1gR1J9KA4wKgEkDw0Hdg%3D%3D', 'indadd': '', 'publishtime': 1606635780, 'stypeadd': '', 'subtype': '需求公示', 'title': '【青岛市】青岛西海岸新区政府网站改版服务采购项目采购需求公示2020年12月', 'toptype': '预告'}, {'_id': 'ABCY2FaYzI%2FIyY7Alpoc2UgPicoFSBjXHR1KB4jKC4wVlJze1JUCcc%3D', 'area': '山东', 'areaadd': 'SD', 'buyerclass': '工信', 'city': '青岛市', 'detail': '', 'href': 'ABCY1xFdjIFKyg4NFl4cAckCjNfSC1gR1J%2BKA5RKk80Dw0HtA%3D%3D', 'indadd': '', 'publishtime': 1606635442, 'stypeadd': '', 'subtype': '需求公示', 'title': '青岛西海岸新区政府网站改版服务采购项目采购需求公示2020年12月', 'toptype': '预告'}, {'_id': 'ABCY2FaYzI%2FIDgsAnhjc08ODyRfHRZ3cVJ0Px4jLSE3dFZzfidUCdE%3D', 'area': '山东', 'areaadd': 'SD', 'city': '青岛市', 'detail': '', 'href': 'ABCZmYIdD0vLyA4Ell4dWJbMDI4QCBmYWB2KB4sKzgkDw0H%2FA%3D%3D', 'indadd': '', 'publishtime': 1606634490, 'stypeadd': '', 'subtype': '需求公示', 'title': '青岛西海岸新区政府网站改版服务采购项目采购需求公示2020年12月', 'toptype': '预告'}, {'_id': 'ABCY2FaYzIeAjk7Amhoc2UgPicoFSBjXHR1KB4kPy43e2BwAitUCVU%3D', 'area': '黑龙江', 'areaadd': 'HLJ', 'bidamount': 807000, 'buyerclass': '政府办', 'city': '伊春市', 'detail': '', 'href': 'ABCYFxVdj1YLyY4And3c1xbDDIoCSNjYV5%2FKB4wKk0kDw0IIw%3D%3D', 'indadd': '', 'publishtime': 1606461726, 'stypeadd': 'CJ', 'subtype': '成交', 'title': '嘉荫县人民政府网站等级保护三级服务项目成交公告', 'toptype': '结果'}], 'pcAjaxFlag': '', 'searchvalue': '政府网站', 'secondFlag': '', 'secondList': None, 'status': 1, 'totalPage': 0}"
        base64_str1 = re.findall(r'base64,(.*?)"', page_text)                                   # 获取图片加密后的字符串
        code_name = re.findall(r'<div>请在下图依次点击：<span>(.*?)</span></div>', page_text)     # 获取需要识别的图片文字
        if base64_str1:
            print('被检测了！')
            print('解决检测中。。。')
            print(code_name)
            img(base64_str1, code_name)

            pic_str = main()                                        # 调用打码平台
            data = {
                "antiVerifyCheck": pic_str,
                "imgw": "331"
            }
            headers_1 = {

                ":authority": "www.jianyu360.com",
                ":method": "POST",
                ":path": "/article/content/ABCY1wIdSkoMysvEn9zcE8zJicCCj1mdmB0Py8wOCE3eFVzcSdUCbA%3D.html",
                ":scheme": "https",
                "accept": "application/json,text/javascript,*/*;q=0.01",
                "accept-encoding": "gzip,deflate,br",
                "accept-language": "zh-CN,zh;q=0.9,en;q=0.8,ar;q=0.7",
                "app": "jyweb",
                "content-length": "55",
                "content-type":"application/x-www-form-urlencoded;charset=UTF-8",
                "cookie": cookie,
                "origin":"https://www.jianyu360.com",
                "referer":"https://www.jianyu360.com/article/content/ABCY1wIdSkoMysvEn9zcE8zJicCCj1mdmB0Py8wOCE3eFVzcSdUCbA%3D.html",
                "sec-ch-ua":'"Google Chrome";v="89", "Chromium";v="89", ";Not A Brand";v="99"',
                "sec-ch-ua-mobile":"?0",
                "sec-fetch-dest":"empty",
                "sec-fetch-mode":"cors",
                "sec-fetch-site":"same-origin",
                "user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36",
                "x-requested-with":"XMLHttpRequest"
            }
            sessions = requests.session()
            sessions.mount("https://www.jianyu360.com", HTTP20Adapter())                # 解决headers报错问题
            qwq = sessions.get(url='https://www.jianyu360.com/jylab/supsearch/index.html', headers=headers_1, data=data)
            print(qwq.text)                     # 验证验证结果
            # if qwq.json()['antiVerify'] == 1:
            #
            #     return 'ok'
        else:
            print("通过")
            return 'no'


url_current = "https://www.jianyu360.com/jylab/supsearch/index.html"            # 当前遇到的验证码的url
# code_testing(page_text,url_current)